+++
title = "Structs and References"
weight = 75
+++

# Structs
Classes declared in script are always types of `UObject`, and are part of unreal's normal object system and garbage collector.

You can also make structs in script, which behave as value types:

<div class="code_block" style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'Terminus (TTF) for Windows', Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #569cd6;">struct</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">FExampleStruct</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">/* Properties with UPROPERTY() in a struct will be accessible in blueprint. */</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4fc1ff;">UPROPERTY</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">float</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ExampleNumber</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">4.0</span><span style="color: #d4d4d4;">;</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4fc1ff;">UPROPERTY</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">FString</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ExampleString</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Example String"</span><span style="color: #d4d4d4;">;</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">/* Properties without UPROPERTY() will still be in the struct, but cannot be seen by blueprint. */</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">float</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ExampleHiddenNumber</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">3.0</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">};</span></div></div>

> **Note:** Unlike classes, structs cannot have `UFUNCTION()`s. They _can_ have plain script methods on them however, although they will not be usable from blueprint.

## Passing and Returning Structs
Structs can be passed and returned from script functions and `UFUNCTION`s as normal:

<div class="code_block" style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'Terminus (TTF) for Windows', Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #4fc1ff;">UFUNCTION</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #4ec9b0;">FExampleStruct</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">CreateExampleStruct</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">float</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Number</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">FExampleStruct</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ResultStruct</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">ResultStruct</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">ExampleNumber</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">Number</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">ResultStruct</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">ExampleString</span><span style="color: #d4d4d4;"> = </span><span style="color: #d7ba7d;">f"</span><span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">Number</span><span style="color: #569cd6;">}</span><span style="color: #d7ba7d;">"</span><span style="color: #d4d4d4;">;</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ResultStruct</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">}</span></div><br><div><span style="color: #4fc1ff;">UFUNCTION</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">BlueprintPure</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #569cd6;">bool</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">IsNumberInStructEqual</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">FExampleStruct</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Struct</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">float</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">TestNumber</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Struct</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">ExampleNumber</span><span style="color: #d4d4d4;"> == </span><span style="color: #9cdcfe;">TestNumber</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">}</span></div></div>

## Struct References
By default, argument values in script functions are read-only. 
That means properties of a struct parameter cannot be changed, and non-const methods cannot be called on it.

If needed, you can take a reference to a struct to modify it:

<div class="code_block" style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'Terminus (TTF) for Windows', Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #6a9955;">// Change the parameter struct so its number is randomized between 0.0 and 1.0</span></div><div><span style="color: #4fc1ff;">UFUNCTION</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #569cd6;">void</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">RandomizeNumberInStruct</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">FExampleStruct</span><span style="color: #d4d4d4;">&amp; </span><span style="color: #9cdcfe;">Struct</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">Struct</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">ExampleNumber</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Math</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">RandRange</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0.0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1.0</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">}</span></div></div>

## Declaring Out Parameters
When a function with a struct reference is called from a blueprint node, the struct will be passed as an input value:

{{ img(path="struct-input.png") }}

When you want a struct parameter to be an ouput value only, declare the reference as `&out` in script. This works to create output pins for primitives as well:

<div class="code_block" style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'Terminus (TTF) for Windows', Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #4fc1ff;">UFUNCTION</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #569cd6;">void</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">OutputRandomizedStruct</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">FExampleStruct</span><span style="color: #d4d4d4;">&amp;out </span><span style="color: #9cdcfe;">OutputStruct</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">bool</span><span style="color: #d4d4d4;">&amp;out </span><span style="color: #9cdcfe;">bOutSuccessful</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">FExampleStruct</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ResultStruct</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">ResultStruct</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">ExampleNumber</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Math</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">RandRange</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0.0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1.0</span><span style="color: #d4d4d4;">);</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">OutputStruct</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">ResultStruct</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">bOutSuccessful</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">}</span></div></div>

{{ img(path="struct-multioutput.png") }}

## Automatic References for Function Parameters
As an implementation detail: script functions never take struct parameters by value.  
When you declare a struct parameter, it is internally implemented as a const reference, as if you added `const &`.

This means there is no difference between an `FVector` parameter and a `const FVector&` parameter. Both behave exactly the same in performance and semantics.

This choice was made to improve script performance and avoid having to instruct gameplay scripters to write `const &` on all their parameters.