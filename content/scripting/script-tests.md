+++
title = "Script Tests"
weight = 200
sort_by = "weight"
+++

# Angelscript Test Support
Angelscript features a xUnit-style unit testing framework. There is also an
integration test framework that can play back game scenarios and wait for
some condition to occur. You can generate code coverage reports for test
runs as well. `FName`

# Unit Tests
<div class="code_block" style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'Terminus (TTF) for Windows', Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #569cd6;">void</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">Test_NameOfTheTestCase</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">FUnitTest</span><span style="color: #d4d4d4;">&amp; </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// Fails the test.</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">AssertTrue</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">false</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">AssertEquals</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;"> + </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">AssertNotNull</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">nullptr</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">}</span></div></div>

You can put test code in any Angelscript file, but by convention these
are put in File_Test.as if your production code is in File.as.

## Running Unit Tests
Unit tests run on hot reload, so to run a test you just create a test like
above, open the Unreal editor, and save the file. In Unreal, go
Window > Developer Tools > Output Log and you will see lines like

```
Angelscript: [RUN]    Some.Angelscript.Subdir.Test_LaunchesNukesWhenCodesAreEntered
...
Angelscript: [OK]     Some.Angelscript.Subdir.Test_LaunchesNukesWhenCodesAreEntered (0.2530 ms)
```

Furthermore, the tests show up under the category "Angelscript" in the Test Automation tool.
You will need to install that one into Unreal. See [https://docs.unrealengine.com/en-US/Programming/Automation/UserGuide/index.html](https://docs.unrealengine.com/en-US/Programming/Automation/UserGuide/index.html)

You can also run tests from the command line:
```
Engine\Binaries\Win64\UE4Editor-Cmd.exe \Path\To\your.uproject -NullRHI -NoSound -NoSplash -ExecCmds="Automation RunTests Angelscript.UnitTests" -TestExit "Automation Test Queue Empty+Found 0 Automation Tests, based on" -unattended -stdout -as-exit-on-error
```

## Installing a Custom Game Mode for Unit Tests
You can add this line to one of your .ini files in your project to get a game mode in your tests:
You can then create a blueprint at the specified location and put whatever settings you want in there.
This will be used by all unit tests.

```ini
[/Script/EngineSettings.GameMapsSettings]
...
+GameModeClassAliases=(Name="UnitTest",GameMode="/Game/Testing/UnitTest/BP_UnitTestGameMode.BP_UnitTestGameMode_C")
```

# Integration Tests

Integration tests are for testing larger or longer code-flows and gameplay.

By default, each integration test has a map where you can draw up any geometry or place any actors you like.

Add this to for instance MyTestName_IntegrationTest.as:

<div class="code_block" style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'Terminus (TTF) for Windows', Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #569cd6;">void</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">IntegrationTest_MyTestName</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">FIntegrationTest</span><span style="color: #d4d4d4;">&amp; </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">{ &#160; </span></div><div><span style="color: #d4d4d4;">}</span></div></div>

Then you need to add a test map IntegrationTest_MyTestName.umap to /Content/Testing/ (create the dir if you don't have it
in your project yet). The map name is always the same as the test name, with .umap added.

You can also configure the integration test map dir with this setting in your .ini files:

```ini
[/Script/AngelscriptCode.AngelscriptTestSettings]
IntegrationTestMapRoot=/Game/Testing/
```

If you would like to use a different map for an integration test, or the same map for multiple tests (e.g. testing in your existing level .umap files), create a second function with the format `FString IntegrationTest_MyTestName_GetMapName()` and return the full path to the map. This is something like `/Game/YourProject/YourMap`. You can right click the map and copy the reference to see it.

<div style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'JetBrains Mono NL', Consolas, 'Courier New', monospace, Consolas, 'Courier New', monospace;font-weight: normal;font-size: 13px;line-height: 18px;white-space: pre;"><div><span style="color: #4ec9b0;">FString</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">IntegrationTest_MyTestName_GetMapName</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"/Game/YourProject/Maps/YourMap"</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">}</span></div></div>


Note: changing levels isn't supported at the moment, it breaks the GameWorld context passed to the FAngelscriptContext that the angelscript code is being executed within.


You can retrieve placed actors like this (or spawn them in the test):

<div class="code_block" style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'Terminus (TTF) for Windows', Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #6a9955;">// Looks up an actor in the map</span></div><div><span style="color: #4ec9b0;">AActor</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">GetActorByLabel</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">UClass</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Class</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">FName</span><span style="color: #d4d4d4;">&amp; </span><span style="color: #9cdcfe;">Label</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #569cd6;">#if EDITOR</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">TArray</span><span style="color: #d4d4d4;">&lt;</span><span style="color: #4ec9b0;">AActor</span><span style="color: #d4d4d4;">&gt; </span><span style="color: #9cdcfe;">Actors</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #dcdcaa;">GetAllActorsOfClass</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Class</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">Actors</span><span style="color: #d4d4d4;">);</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #4ec9b0;">AActor</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Actor</span><span style="color: #d4d4d4;">: </span><span style="color: #9cdcfe;">Actors</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #569cd6;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">Actor</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">GetActorLabel</span><span style="color: #d4d4d4;">() == </span><span style="color: #9cdcfe;">Label</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Actor</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; }</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">FString</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">AllActorLabels</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">""</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #4ec9b0;">AActor</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Actor</span><span style="color: #d4d4d4;">: </span><span style="color: #9cdcfe;">Actors</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #9cdcfe;">AllActorLabels</span><span style="color: #d4d4d4;"> += </span><span style="color: #ce9178;">"- "</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">Actor</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">GetActorLabel</span><span style="color: #d4d4d4;">() + </span><span style="color: #ce9178;">"</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;">"</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">AllActorLabels</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">IsEmpty</span><span style="color: #d4d4d4;">())</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #dcdcaa;">Throw</span><span style="color: #d4d4d4;">(</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #ce9178;">"Did not find an actor with class "</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">Class</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">GetName</span><span style="color: #d4d4d4;">() +</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #ce9178;">" and label "</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">Label</span><span style="color: #d4d4d4;"> + </span><span style="color: #ce9178;">". In fact, there no actors in this level."</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">else</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #dcdcaa;">Throw</span><span style="color: #d4d4d4;">(</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #ce9178;">"Did not find an actor with class "</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">Class</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">GetName</span><span style="color: #d4d4d4;">() +</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #ce9178;">" and label "</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">Label</span><span style="color: #d4d4d4;"> + </span><span style="color: #ce9178;">". Found these actors:</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;">"</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">AllActorLabels</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><div><span style="color: #569cd6;">#endif &#160;// EDITOR</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #dcdcaa;">Throw</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"GetActorByLabel is only for testing, i.e. when in EDITOR mode."</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">nullptr</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">}</span></div></div>

## Latent Automation Commands
The code in the test function executes before the map is loaded and before the first frame executes. The test is not complete when the test function returns therefore, it has merely enqueued a series of *latent automation commands* ([Unreal documentation](https://docs.unrealengine.com/en-US/Programming/Automation/TechnicalGuide/index.html)). If we assume the test enqueues no latent commands of its own (like the one above), the test framework will enqueue the following actions (see IntegrationTest.cpp):

- FWaitForMapToLoadCommand()
- FEnsureWorldLoaded()
- FExitGameCommand()
- FReportFinished()
- FFreeTest()

These execute in sequence. Each action can take multiple engine frames to execute.

The test can enqueue latent commands of its own:

<div class="code_block" style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'Terminus (TTF) for Windows', Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #569cd6;">void</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">IntegrationTest_AlienShootsRepeatedly</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">FIntegrationTest</span><span style="color: #d4d4d4;">&amp; </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">{ </span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">AActor</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">A</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">GetActorByLabel</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">ABulletSponge</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">StaticClass</span><span style="color: #d4d4d4;">(), n</span><span style="color: #ce9178;">"BulletSponge"</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">ABulletSponge</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Floor</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">Cast</span><span style="color: #d4d4d4;">&lt;</span><span style="color: #4ec9b0;">ABulletSponge</span><span style="color: #d4d4d4;">&gt;(</span><span style="color: #9cdcfe;">A</span><span style="color: #d4d4d4;">);</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">AddLatentAutomationCommand</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">UGetsShotXTimes</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Floor</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">));</span></div><div><span style="color: #d4d4d4;">}</span></div></div>

The action is enqueued using `T.AddLatentAutomationCommand`. The set of latent actions will now be:

- ...
- FEnsureWorldLoaded()
- UGetsShowXTimes()
- FExitGameCommand()
- ...

AddLatentAutomationCommand takes a `ULatentAutomationCommand`:

<div class="code_block" style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'Terminus (TTF) for Windows', Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #4fc1ff;">UCLASS</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">ABulletSponge</span><span style="color: #d4d4d4;"> : </span><span style="color: #4ec9b0;">AStaticMeshActor</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">int</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">NumTimesHit</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4fc1ff;">UFUNCTION</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">BlueprintOverride</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">void</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">BeginPlay</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #9cdcfe;">OnTakeAnyDamage</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">AddUFunction</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">, n</span><span style="color: #ce9178;">"TakeAnyDamage"</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4fc1ff;">UFUNCTION</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">private</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">void</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">TakeAnyDamage</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">AActor</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">DamagedActor</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">float32</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Damage</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">UDamageType</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">DamageType</span><span style="color: #d4d4d4;">, </span><span style="color: #4ec9b0;">AController</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">InstigatedBy</span><span style="color: #d4d4d4;">, </span><span style="color: #4ec9b0;">AActor</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">DamageCauser</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #9cdcfe;">NumTimesHit</span><span style="color: #d4d4d4;">++;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><div><span style="color: #d4d4d4;">}</span></div><br><div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">UGetsShotXTimes</span><span style="color: #d4d4d4;"> : </span><span style="color: #4ec9b0;">ULatentAutomationCommand</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">private</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">ABulletSponge</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">BulletSponge</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">private</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">int</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ExpectedNumHits</span><span style="color: #d4d4d4;">;</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">UGetsShotXTimes</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">ABulletSponge</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Target</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">int</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">X</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #9cdcfe;">BulletSponge</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">Target</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #9cdcfe;">ExpectedNumHits</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">X</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4fc1ff;">UFUNCTION</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">BlueprintOverride</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">bool</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">Update</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #6a9955;">// Note: actors can get DestroyActor'd at any time, so fail nicely if that happens!</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #dcdcaa;">ensure</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">IsValid</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">BulletSponge</span><span style="color: #d4d4d4;">));</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">BulletSponge</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">NumTimesHit</span><span style="color: #d4d4d4;"> &gt; </span><span style="color: #9cdcfe;">ExpectedNumHits</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4fc1ff;">UFUNCTION</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">BlueprintOverride</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">FString</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">Describe</span><span style="color: #d4d4d4;">() </span><span style="color: #569cd6;">const</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">BulletSponge</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">GetPathName</span><span style="color: #d4d4d4;">() + </span><span style="color: #ce9178;">": bullet sponge got hit "</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">BulletSponge</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">NumTimesHit</span><span style="color: #d4d4d4;"> + </span><span style="color: #ce9178;">"/"</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">ExpectedNumHits</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><div><span style="color: #d4d4d4;">}</span></div></div>

The game engine will keep ticking as long as Update returns false. This means you can wait on any condition you can think of. The default timeout is five seconds though, so you can't wait for too long.

You can specify `default bAllowTimeout = true` on a latent command to allow it to time out. This is useful if you want to test that something is *not* happening
(e.g. check actor doesn't move out of bounds during 5 seconds).

## Client/Server vs Standalone

The default behaviour is to run the integration tests in a client/dedicated-server model. This will break some assumptions and code that singleplayer games use. To run it in standalone mode instead, disable `Project Settings -> Angelscript Test Settings -> Use Client Server Model`.

## Running Integration Tests
Integration tests don't run on hot reload like unit tests, so you need to invoke them through the Test Automation window in Unreal. They are run just like unit tests, see above.

To run integration tests from the command line, run the same line as for unit tests but replace Angelscript.UnitTests with Angelscript.IntegrationTests.

## Complex Integration Tests
You can also generate test cases dynamically:

<div class="code_block" style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'Terminus (TTF) for Windows', Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #569cd6;">void</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">ComplexIntegrationTest_PotionsAreTooStrongForKnight_GetTests</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">TArray</span><span style="color: #d4d4d4;">&lt;</span><span style="color: #4ec9b0;">FString</span><span style="color: #d4d4d4;">&gt;&amp; </span><span style="color: #9cdcfe;">OutTestCommands</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160;</span><span style="color: #569cd6;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #4ec9b0;">APotion</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Potion</span><span style="color: #d4d4d4;">: </span><span style="color: #4ec9b0;">MyGame</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">GetPotionRegistry</span><span style="color: #d4d4d4;">().</span><span style="color: #dcdcaa;">GetAllPotions</span><span style="color: #d4d4d4;">())</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160;{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160;</span><span style="color: #9cdcfe;">OutTestCommands</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">Add</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Potion</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">GetName</span><span style="color: #d4d4d4;">().</span><span style="color: #dcdcaa;">ToString</span><span style="color: #d4d4d4;">());</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160;}</span></div><div><span style="color: #d4d4d4;">}</span></div><br><div><span style="color: #569cd6;">void</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">ComplexIntegrationTest_PotionsAreTooStrongForKnight</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">FIntegrationTest</span><span style="color: #d4d4d4;">&amp; </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">FString</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">PotionName</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">GetParam</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">APotion</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Potion</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">MyGame</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">GetPotionRegistry</span><span style="color: #d4d4d4;">().</span><span style="color: #dcdcaa;">LookupPotion</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">PotionName</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">AKnight</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Knight</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">Cast</span><span style="color: #d4d4d4;">&lt;</span><span style="color: #4ec9b0;">AKnight</span><span style="color: #d4d4d4;">&gt;(</span><span style="color: #dcdcaa;">GetActorByLabel</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">AKnight</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">StaticClass</span><span style="color: #d4d4d4;">(), n</span><span style="color: #ce9178;">"Knight"</span><span style="color: #d4d4d4;">));</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">AActor</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">PotionSeller</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">GetActorByLabel</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">AActor</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">StaticClass</span><span style="color: #d4d4d4;">(), n</span><span style="color: #ce9178;">"PotionSeller"</span><span style="color: #d4d4d4;">);</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// Order the knight to walk over to the potion seller and try to buy a potion.</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">Knight</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">BuyPotionFrom</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">PotionSeller</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">Potion</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">AddLatentAutomationCommand</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">UExpectResponse</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"My potions are too strong for you traveller."</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">Knight</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">PotionSeller</span><span style="color: #d4d4d4;">));</span></div><div><span style="color: #d4d4d4;">}</span></div></div>

If we assume you have three potions in your potion registry, this generates three test cases:

```
Angelscript.IntegrationTest.Your.Path.ComplexIntegrationTest_PotionsAreTooStrongForKnight[DA_Potion1]
Angelscript.IntegrationTest.Your.Path.ComplexIntegrationTest_PotionsAreTooStrongForKnight[DA_Potion2]
Angelscript.IntegrationTest.Your.Path.ComplexIntegrationTest_PotionsAreTooStrongForKnight[DA_Potion3]
```

## A Full Example

<div style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'JetBrains Mono NL', Consolas, 'Courier New', monospace, Consolas, 'Courier New', monospace;font-weight: normal;font-size: 13px;line-height: 18px;white-space: pre;"><div><span style="color: #6a9955;">/**</span></div><div><span style="color: #6a9955;">&#160;* An example of an integration test to test that saves are backwards compatible (via</span></div><div><span style="color: #6a9955;">&#160;* upgrades/migrations). This could be in a file called</span></div><div><span style="color: #6a9955;">&#160;* Testing/UpgradeSaveGame_IntegrationTest.as, or</span></div><div><span style="color: #6a9955;">&#160;* AnythingElse/DoesntMatter_IntegrationTest.as.</span></div><div><span style="color: #6a9955;">&#160;*</span></div><div><span style="color: #6a9955;">&#160;* Assume that we changed the protected variable that ExampleGameMode::GetCash() uses,</span></div><div><span style="color: #6a9955;">&#160;* between v1 and v2, and we want to ensure that our upgrade code (not shown)</span></div><div><span style="color: #6a9955;">&#160;* successfully copies it from the old variable to the new.</span></div><div><span style="color: #6a9955;">&#160;*</span></div><div><span style="color: #6a9955;">&#160;* Note that angelscript does a lot of lifting around turning the automation framework</span></div><div><span style="color: #6a9955;">&#160;* into integration tests. See the code for more details.</span></div><div><span style="color: #6a9955;">&#160;*</span></div><div><span style="color: #6a9955;">&#160;*/</span></div><br><div><span style="color: #6a9955;">// define the overall test. The naming standard is important. you run this from Session</span></div><div><span style="color: #6a9955;">// Frontend -&gt; Automation Tab. Search for e.g. "V1" to show this function, then tick it</span></div><div><span style="color: #6a9955;">// to select it.</span></div><div><span style="color: #569cd6;">void</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">IntegrationTest_UpgradeSaveGameV1</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">FIntegrationTest</span><span style="color: #d4d4d4;">&amp; </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// queue the object that can run for more than one frame, to validate a long-running test</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #9cdcfe;">T</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">AddLatentAutomationCommand</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">UTestUpgradeSaveGameV1</span><span style="color: #d4d4d4;">());</span></div><div><span style="color: #d4d4d4;">}</span></div><br><div><span style="color: #6a9955;">// A function that returns an FString, with the same name as the integration test + a</span></div><div><span style="color: #6a9955;">// _GetMapName() suffix allows us to override the default behaviour of requiring a map</span></div><div><span style="color: #6a9955;">// name matching the test name.</span></div><div><span style="color: #4ec9b0;">FString</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">IntegrationTest_UpgradeSaveGameV1_GetMapName</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"/Game/IS/Maps/ISMainMap"</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">}</span></div><br><div><span style="color: #6a9955;">// bulk of the work is here. You can have multiple of these</span></div><div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">UTestUpgradeSaveGameV1</span><span style="color: #d4d4d4;"> : </span><span style="color: #4ec9b0;">ULatentAutomationCommand</span></div><div><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// the sentinal value we expect to see in the loaded save. in the v1 save this is</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// stored in ExampleGameMode::Cash. In the v2 save, ExampleGameMode::GetCash()</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// should be able to retrieve this from the new CashTest variable.</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// different to what CashTest defaults to.</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">float</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">CashFromV1Save</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">12345.0</span><span style="color: #d4d4d4;">;</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// manually create a save in the previous version to use in the test here.</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">FString</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">V1SaveFileName</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"IntegrationTest_UpgradeSaveGameV1"</span><span style="color: #d4d4d4;">;</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// This runs at the start of this command's lifetime in the test. GetWorld(), and</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// therefore all the automatic context places it's used, should be valid here</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// (unless you try changing the map)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4fc1ff;">UFUNCTION</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">BlueprintOverride</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">void</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">Before</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #4ec9b0;">auto</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">GM</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">ExampleGameMode</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">Get</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #4ec9b0;">auto</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ExampleSaveSystem</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">UExampleSaveSystem</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">Get</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #9cdcfe;">ExampleSaveSystem</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">SelectSaveFile</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">V1SaveFileName</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #6a9955;">// can't change the map in an integration test, so don't do a full map reload. Just deserialize</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #9cdcfe;">ExampleSaveSystem</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">LoadWithoutReload</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">V1SaveFileName</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// runs each tick. Return true to pass the test. The test fails if the timeout</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// (default 5 seconds) is hit and this hasn't returned true.</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4fc1ff;">UFUNCTION</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">BlueprintOverride</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #569cd6;">bool</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">Update</span><span style="color: #d4d4d4;">()</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #4ec9b0;">auto</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">GM</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">ExampleGameMode</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">Get</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #6a9955;">// if the gamemode is loaded from the save, and the upgrade code has run</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #6a9955;">// successfully, the values should match.</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #569cd6;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">GM</span><span style="color: #d4d4d4;"> != </span><span style="color: #569cd6;">nullptr</span><span style="color: #d4d4d4;"> &amp;&amp; </span><span style="color: #4ec9b0;">Math</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">IsNearlyEqual</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">CashFromV1Save</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">GM</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">GetCash</span><span style="color: #d4d4d4;">()))</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; }</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">false</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><br><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// The output in the automation test log. Show expected success condition and</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// current state for debugging when it fails. Important to check GetWorld() in case</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #6a9955;">// it runs too early.</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4fc1ff;">UFUNCTION</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">BlueprintOverride</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; </span><span style="color: #4ec9b0;">FString</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">Describe</span><span style="color: #d4d4d4;">() </span><span style="color: #569cd6;">const</span></div><div><span style="color: #d4d4d4;">&#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #569cd6;">float</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ActualCash</span><span style="color: #d4d4d4;"> = -</span><span style="color: #b5cea8;">1.0</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #569cd6;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #dcdcaa;">GetWorld</span><span style="color: #d4d4d4;">() != </span><span style="color: #569cd6;">nullptr</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #4ec9b0;">auto</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">GM</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">ExampleGameMode</span><span style="color: #d4d4d4;">::</span><span style="color: #dcdcaa;">Get</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #569cd6;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">GM</span><span style="color: #d4d4d4;"> != </span><span style="color: #569cd6;">nullptr</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160; &#160; {</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #9cdcfe;">ActualCash</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">GM</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">GetCash</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; &#160; &#160; }</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; }</span></div><div><span style="color: #d4d4d4;">&#160; &#160; &#160; &#160; </span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #d7ba7d;">f"</span><span style="color: #ce9178;">Expected cash: </span><span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">CashFromV1Save</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">, Actual cash: </span><span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">ActualCash</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> (-1 is null)</span><span style="color: #d7ba7d;">"</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&#160; &#160; }</span></div><div><span style="color: #d4d4d4;">}</span></div></div>


# Code Coverage
Enable code coverage in Project Settings > Editor > Angelscript Test settings (or pass -as-enable-code-coverage on the command line). Note, code coverage slows down editor startup by ~20 seconds so remember to turn it off later.

![CoverageToggle](/img/coverage-toggle.png)

Run some tests as described above. The editor will write a report to Saved/CodeCoverage. Note: it's overwritten each time you start a new test run.

![CoverageDir](/img/coverage-dir.png)

Open index.html to see a summary for all your angelscript.

![CoverageIndex](/img/coverage-index.png)

Open individual files to see their line coverage.

![CoverageDir](/img/coverage-file.png)
